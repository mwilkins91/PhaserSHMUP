(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update /* debug: , render: render */ });

function preload() {

	game.load.image('sky', 'assets/sky.png');
	game.load.image('ground', 'assets/platform.png');
	game.load.image('star', 'assets/star.png');
	game.load.spritesheet('dude', 'assets/plane.png', 100, 100);
	game.load.image('starfield', 'assets/starfield.png');
	game.load.image('laser', 'assets/bullet.png');
	game.load.image('enemy', 'assets/enemy.png');
	game.load.spritesheet('explosion', 'https://raw.githubusercontent.com/jschomay/phaser-demo-game/master/assets/explode.png', 128, 128);
}

var player = void 0;
var platforms = void 0;
var cursors = void 0;

var starfield = void 0;
var fireButton = void 0;
var ship = void 0;
var lasers = void 0;
var mouseTouchDown = false;
var enemies = void 0;
var explosions = void 0;
var difficulty = 30;
var enemySpeed = 200;
var difficultyLevelText = 0;
var difficultyText = void 0;
var score = 0;
var scoreText = void 0;

function create() {

	//  Make the world larger than the actual canvas
	// game.world.setBounds(0, 0, 800, 10000);

	starfield = game.add.tileSprite(0, 0, 800, 600, 'starfield');

	//  We're going to be using physics, so enable the Arcade Physics system
	game.physics.startSystem(Phaser.Physics.ARCADE);

	//  A simple background for our game
	// game.add.sprite(0, 0, 'sky');

	//  The platforms group contains the ground and the 2 ledges we can jump on
	platforms = game.add.group();

	//  We will enable physics for any object that is created in this group
	platforms.enableBody = true;

	// Create the group using the group factory
	lasers = game.add.group();
	// To move the sprites later on, we have to enable the body
	lasers.enableBody = true;
	// We're going to set the body type to the ARCADE physics, since we don't need any advanced physics
	lasers.physicsBodyType = Phaser.Physics.ARCADE;
	/*
 
 	This will create 20 sprites and add it to the stage. They're inactive and invisible, but they're there for later use.
 	We only have 20 laser bullets available, and will 'clean' and reset they're off the screen.
 	This way we save on precious resources by not constantly adding & removing new sprites to the stage
 
 */
	lasers.createMultiple(2, 'laser');

	/*
 
 	Behind the scenes, this will call the following function on all lasers:
 		- events.onOutOfBounds.add(resetLaser)
 	Every sprite has an 'events' property, where you can add callbacks to specific events.
 	Instead of looping over every sprite in the group manually, this function will do it for us.
 
 // */
	lasers.callAll('events.onOutOfBounds.add', 'events.onOutOfBounds', resetLaser);
	// // Same as above, set the anchor of every sprite to 0.5, 1.0
	lasers.callAll('anchor.setTo', 'anchor', 0.5, 1.0);

	// // This will set 'checkWorldBounds' to true on all sprites in the group
	lasers.setAll('checkWorldBounds', true);

	// The player and its settings
	player = game.add.sprite(350, game.world.height - 150, 'dude');

	//  We need to enable physics on the player
	game.physics.arcade.enable(player);

	//  Player physics properties. Give the little guy a slight bounce.
	player.body.bounce.y = 0.5;
	player.body.gravity.y = 0;
	player.body.collideWorldBounds = true;
	player.body.setSize(50, 50, 25, 25);
	//  Our two animations, walking left and right.
	player.animations.add('left', [2], 10, true);
	player.animations.add('right', [1], 10, true);
	player.animations.add('still', [0, 5], 10, true);

	// The baddies!
	enemies = game.add.group();
	enemies.enableBody = true;
	enemies.physicsBodyType = Phaser.Physics.ARCADE;
	enemies.createMultiple(5, 'enemy');
	enemies.setAll('anchor.x', 0.5);
	enemies.setAll('anchor.y', 0.5);
	enemies.setAll('scale.x', 0.5);
	enemies.setAll('scale.y', 0.5);
	enemies.setAll('angle', 180);
	enemies.setAll('outOfBoundsKill', true);
	enemies.setAll('checkWorldBounds', true);
	launchGreenEnemy();

	//  An explosion pool
	explosions = game.add.group();
	explosions.enableBody = true;
	explosions.physicsBodyType = Phaser.Physics.ARCADE;
	explosions.createMultiple(30, 'explosion');
	explosions.setAll('anchor.x', 0.5);
	explosions.setAll('anchor.y', 0.5);
	explosions.forEach(function (explosion) {
		explosion.animations.add('explosion');
	});
	//  Our controls.
	cursors = game.input.keyboard.createCursorKeys();

	game.camera.follow(player);

	fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

	difficultyText = game.add.text(16, 16, 'Difficulty Level: 0', { fontSize: '32px', fill: '#fff' });
	scoreText = game.add.text(16, 60, 'Score: 0', { fontSize: '32px', fill: '#fff' });

	setInterval(function () {
		if (difficulty > 1) {
			difficulty = difficulty - 1;
		}
		difficultyLevelText = difficultyLevelText + 1;
		difficultyText.text = 'Difficulty Level: ' + difficultyLevelText;

		if (difficulty > 20) {
			enemySpeed = enemySpeed + 20;
		} else if (difficulty > 10 && difficulty <= 20) {
			enemySpeed = enemySpeed + 15;
		} else if (difficulty <= 10) {
			enemySpeed = enemySpeed + 10;
		}
		score = score + 10;
		scoreText.text = 'Score: ' + score;
	}, 3000);
}

function update() {

	//  Collide the player and the stars with the platforms
	game.physics.arcade.collide(player, platforms);

	//  Reset the players velocity (movement)
	player.body.velocity.x = 0;
	player.body.velocity.y = 0;
	// player.body.velocity.y = -150;


	if (cursors.left.isDown) {
		//  Move to the left
		player.body.velocity.x = -150;
		// player.animations.play('left');
	} else if (cursors.right.isDown) {
		//  Move to the right
		player.body.velocity.x = 150;

		// player.animations.play('right');
	} else {
		//  Stand still
		// player.animations.stop();

		player.animations.play('still');
	}

	//  Allow the player to jump if they are touching the ground.
	if (cursors.up.isDown) {
		player.body.velocity.y = -150;
	}

	if (cursors.down.isDown) {
		player.body.velocity.y = 100;
	}

	if (fireButton.isDown) {
		playerFires();
	}

	game.physics.arcade.overlap(lasers, enemies, shipCollide, null, this);
	game.physics.arcade.overlap(player, enemies, playerCollide, null, this);
	starfield.tilePosition.y += 3;
}

function shipCollide(player, enemy) {
	var explosion = explosions.getFirstExists(false);
	explosion.reset(enemy.body.x + enemy.body.halfWidth, enemy.body.y + enemy.body.halfHeight);
	explosion.body.velocity.y = enemy.body.velocity.y;
	explosion.alpha = 0.7;
	explosion.play('explosion', 30, false, true);
	enemy.kill();
	score = score + 5;
	scoreText.text = 'Score: ' + score;
}

function playerCollide(player, enemy) {
	var explosion = explosions.getFirstExists(false);
	explosion.reset(player.body.x + player.body.halfWidth, player.body.y + player.body.halfHeight);
	explosion.body.velocity.y = player.body.velocity.y;
	explosion.alpha = 0.7;
	explosion.play('explosion', 30, false, true);
	player.kill();
}

// debug
// function render() {
// 	game.debug.bodyInfo(player, 32, 32);
// 	game.debug.body(player);
// 	enemies.children.forEach((enemy) => {
// 		game.debug.body(enemy);
// 	})
// }

function playerFires() {
	// Get the first laser that's inactive, by passing 'false' as a parameter
	var laser = lasers.getFirstExists(false);
	if (laser) {
		// If we have a laser, set it to the starting position
		laser.reset(player.x + 50, player.y - 20);
		// Give it a velocity of -500 so it starts shooting
		laser.body.velocity.y = -500;
	}
}

function resetLaser(laser) {
	// Destroy the laser
	laser.kill();
}

function launchGreenEnemy() {
	var difficultyMulti = difficulty * 10;
	var MIN_ENEMY_SPACING = difficultyMulti;
	var MAX_ENEMY_SPACING = difficultyMulti * 10;
	var ENEMY_SPEED = enemySpeed;

	var enemy = enemies.getFirstExists(false);
	if (enemy) {
		enemy.reset(game.rnd.integerInRange(0, game.width), -20);
		enemy.body.velocity.x = game.rnd.integerInRange(-300, 300);
		enemy.body.velocity.y = ENEMY_SPEED;
		enemy.body.drag.x = 100;
		enemy.body.setSize(50, 50);
		enemy.update = function () {
			enemy.angle = 180 - game.math.radToDeg(Math.atan2(enemy.body.velocity.x, enemy.body.velocity.y));
		};
	}
	//  Send another enemy soon
	game.time.events.add(game.rnd.integerInRange(MIN_ENEMY_SPACING, MAX_ENEMY_SPACING), launchGreenEnemy);
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxPQUFPLElBQUksT0FBTyxJQUFYLENBQWdCLEdBQWhCLEVBQXFCLEdBQXJCLEVBQTBCLE9BQU8sSUFBakMsRUFBdUMsRUFBdkMsRUFBMkMsRUFBRSxTQUFTLE9BQVgsRUFBb0IsUUFBUSxNQUE1QixFQUFvQyxRQUFRLE1BQTVDLENBQW1ELDZCQUFuRCxFQUEzQyxDQUFiOztBQUVBLFNBQVMsT0FBVCxHQUFtQjs7QUFFbEIsTUFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixLQUFoQixFQUF1QixnQkFBdkI7QUFDQSxNQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLFFBQWhCLEVBQTBCLHFCQUExQjtBQUNBLE1BQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsTUFBaEIsRUFBd0IsaUJBQXhCO0FBQ0EsTUFBSyxJQUFMLENBQVUsV0FBVixDQUFzQixNQUF0QixFQUE4QixrQkFBOUIsRUFBa0QsR0FBbEQsRUFBdUQsR0FBdkQ7QUFDQSxNQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLFdBQWhCLEVBQTZCLHNCQUE3QjtBQUNBLE1BQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsT0FBaEIsRUFBeUIsbUJBQXpCO0FBQ0EsTUFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixPQUFoQixFQUF5QixrQkFBekI7QUFDQSxNQUFLLElBQUwsQ0FBVSxXQUFWLENBQXNCLFdBQXRCLEVBQW1DLHVGQUFuQyxFQUE0SCxHQUE1SCxFQUFpSSxHQUFqSTtBQUNBOztBQUVELElBQUksZUFBSjtBQUNBLElBQUksa0JBQUo7QUFDQSxJQUFJLGdCQUFKOztBQUVBLElBQUksa0JBQUo7QUFDQSxJQUFJLG1CQUFKO0FBQ0EsSUFBSSxhQUFKO0FBQ0EsSUFBSSxlQUFKO0FBQ0EsSUFBSSxpQkFBaUIsS0FBckI7QUFDQSxJQUFJLGdCQUFKO0FB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QUFDLEdBQXpCLEVBQThCLEdBQTlCLENBQXhCO0FBQ0EsUUFBTSxJQUFOLENBQVcsUUFBWCxDQUFvQixDQUFwQixHQUF3QixXQUF4QjtBQUNBLFFBQU0sSUFBTixDQUFXLElBQVgsQ0FBZ0IsQ0FBaEIsR0FBb0IsR0FBcEI7QUFDQSxRQUFNLElBQU4sQ0FBVyxPQUFYLENBQW1CLEVBQW5CLEVBQXVCLEVBQXZCO0FBQ0EsUUFBTSxNQUFOLEdBQWUsWUFBVztBQUN6QixTQUFNLEtBQU4sR0FBYyxNQUFNLEtBQUssSUFBTCxDQUFVLFFBQVYsQ0FBbUIsS0FBSyxLQUFMLENBQVcsTUFBTSxJQUFOLENBQVcsUUFBWCxDQUFvQixDQUEvQixFQUFrQyxNQUFNLElBQU4sQ0FBVyxRQUFYLENBQW9CLENBQXRELENBQW5CLENBQXBCO0FBQ0EsR0FGRDtBQUdBO0FBQ0Q7QUFDQSxNQUFLLElBQUwsQ0FBVSxNQUFWLENBQWlCLEdBQWpCLENBQXFCLEtBQUssR0FBTCxDQUFTLGNBQVQsQ0FBd0IsaUJBQXhCLEVBQTJDLGlCQUEzQyxDQUFyQixFQUFvRixnQkFBcEY7QUFFQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zdCBnYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJycsIHsgcHJlbG9hZDogcHJlbG9hZCwgY3JlYXRlOiBjcmVhdGUsIHVwZGF0ZTogdXBkYXRlIC8qIGRlYnVnOiAsIHJlbmRlcjogcmVuZGVyICovIH0pO1xyXG5cclxuZnVuY3Rpb24gcHJlbG9hZCgpIHtcclxuXHJcblx0Z2FtZS5sb2FkLmltYWdlKCdza3knLCAnYXNzZXRzL3NreS5wbmcnKTtcclxuXHRnYW1lLmxvYWQuaW1hZ2UoJ2dyb3VuZCcsICdhc3NldHMvcGxhdGZvcm0ucG5nJyk7XHJcblx0Z2FtZS5sb2FkLmltYWdlKCdzdGFyJywgJ2Fzc2V0cy9zdGFyLnBuZycpO1xyXG5cdGdhbWUubG9hZC5zcHJpdGVzaGVldCgnZHVkZScsICdhc3NldHMvcGxhbmUucG5nJywgMTAwLCAxMDApO1xyXG5cdGdhbWUubG9hZC5pbWFnZSgnc3RhcmZpZWxkJywgJ2Fzc2V0cy9zdGFyZmllbGQucG5nJyk7XHJcblx0Z2FtZS5sb2FkLmltYWdlKCdsYXNlcicsICdhc3NldHMvYnVsbGV0LnBuZycpO1xyXG5cdGdhbWUubG9hZC5pbWFnZSgnZW5lbXknLCAnYXNzZXRzL2VuZW15LnBuZycpO1xyXG5cdGdhbWUubG9hZC5zcHJpdGVzaGVldCgnZXhwbG9zaW9uJywgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qc2Nob21heS9waGFzZXItZGVtby1nYW1lL21hc3Rlci9hc3NldHMvZXhwbG9kZS5wbmcnLCAxMjgsIDEyOCk7XHJcbn1cclxuXHJcbmxldCBwbGF5ZXI7XHJcbmxldCBwbGF0Zm9ybXM7XHJcbmxldCBjdXJzb3JzO1xyXG5cclxubGV0IHN0YXJmaWVsZDtcclxubGV0IGZpcmVCdXR0b247XHJcbmxldCBzaGlwO1xyXG5sZXQgbGFzZXJzO1xyXG5sZXQgbW91c2VUb3VjaERvd24gPSBmYWxzZTtcclxubGV0IGVuZW1pZXM7XHJcbmxldCBleHBsb3Npb25zO1xyXG5sZXQgZGlmZmljdWx0eSA9IDMwO1xyXG5sZXQgZW5lbXlTcGVlZCA9IDIwMDtcclxubGV0IGRpZmZpY3VsdHlMZXZlbFRleHQgPSAwO1xyXG5sZXQgZGlmZmljdWx0eVRleHQ7XHJcbmxldCBzY29yZSA9IDA7XHJcbmxldCBzY29yZVRleHQ7XHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlKCkge1xyXG5cclxuXHQvLyAgTWFrZSB0aGUgd29ybGQgbGFyZ2VyIHRoYW4gdGhlIGFjdHVhbCBjYW52YXNcclxuXHQvLyBnYW1lLndvcmxkLnNldEJvdW5kcygwLCAwLCA4MDAsIDEwMDAwKTtcclxuXHJcblx0c3RhcmZpZWxkID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCA4MDAsIDYwMCwgJ3N0YXJmaWVsZCcpO1xyXG5cclxuXHQvLyAgV2UncmUgZ29pbmcgdG8gYmUgdXNpbmcgcGh5c2ljcywgc28gZW5hYmxlIHRoZSBBcmNhZGUgUGh5c2ljcyBzeXN0ZW1cclxuXHRnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuXHJcblx0Ly8gIEEgc2ltcGxlIGJhY2tncm91bmQgZm9yIG91ciBnYW1lXHJcblx0Ly8gZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICdza3knKTtcclxuXHJcblx0Ly8gIFRoZSBwbGF0Zm9ybXMgZ3JvdXAgY29udGFpbnMgdGhlIGdyb3VuZCBhbmQgdGhlIDIgbGVkZ2VzIHdlIGNhbiBqdW1wIG9uXHJcblx0cGxhdGZvcm1zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHJcblx0Ly8gIFdlIHdpbGwgZW5hYmxlIHBoeXNpY3MgZm9yIGFueSBvYmplY3QgdGhhdCBpcyBjcmVhdGVkIGluIHRoaXMgZ3JvdXBcclxuXHRwbGF0Zm9ybXMuZW5hYmxlQm9keSA9IHRydWU7XHJcblxyXG5cclxuXHQvLyBDcmVhdGUgdGhlIGdyb3VwIHVzaW5nIHRoZSBncm91cCBmYWN0b3J5XHJcblx0bGFzZXJzID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHQvLyBUbyBtb3ZlIHRoZSBzcHJpdGVzIGxhdGVyIG9uLCB3ZSBoYXZlIHRvIGVuYWJsZSB0aGUgYm9keVxyXG5cdGxhc2Vycy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuXHQvLyBXZSdyZSBnb2luZyB0byBzZXQgdGhlIGJvZHkgdHlwZSB0byB0aGUgQVJDQURFIHBoeXNpY3MsIHNpbmNlIHdlIGRvbid0IG5lZWQgYW55IGFkdmFuY2VkIHBoeXNpY3NcclxuXHRsYXNlcnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cdC8qXHJcbiBcclxuXHRcdFRoaXMgd2lsbCBjcmVhdGUgMjAgc3ByaXRlcyBhbmQgYWRkIGl0IHRvIHRoZSBzdGFnZS4gVGhleSdyZSBpbmFjdGl2ZSBhbmQgaW52aXNpYmxlLCBidXQgdGhleSdyZSB0aGVyZSBmb3IgbGF0ZXIgdXNlLlxyXG5cdFx0V2Ugb25seSBoYXZlIDIwIGxhc2VyIGJ1bGxldHMgYXZhaWxhYmxlLCBhbmQgd2lsbCAnY2xlYW4nIGFuZCByZXNldCB0aGV5J3JlIG9mZiB0aGUgc2NyZWVuLlxyXG5cdFx0VGhpcyB3YXkgd2Ugc2F2ZSBvbiBwcmVjaW91cyByZXNvdXJjZXMgYnkgbm90IGNvbnN0YW50bHkgYWRkaW5nICYgcmVtb3ZpbmcgbmV3IHNwcml0ZXMgdG8gdGhlIHN0YWdlXHJcbiBcclxuXHQqL1xyXG5cdGxhc2Vycy5jcmVhdGVNdWx0aXBsZSgyLCAnbGFzZXInKTtcclxuXHJcblx0LypcclxuIFxyXG5cdFx0QmVoaW5kIHRoZSBzY2VuZXMsIHRoaXMgd2lsbCBjYWxsIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gb24gYWxsIGxhc2VyczpcclxuXHRcdFx0LSBldmVudHMub25PdXRPZkJvdW5kcy5hZGQocmVzZXRMYXNlcilcclxuXHRcdEV2ZXJ5IHNwcml0ZSBoYXMgYW4gJ2V2ZW50cycgcHJvcGVydHksIHdoZXJlIHlvdSBjYW4gYWRkIGNhbGxiYWNrcyB0byBzcGVjaWZpYyBldmVudHMuXHJcblx0XHRJbnN0ZWFkIG9mIGxvb3Bpbmcgb3ZlciBldmVyeSBzcHJpdGUgaW4gdGhlIGdyb3VwIG1hbnVhbGx5LCB0aGlzIGZ1bmN0aW9uIHdpbGwgZG8gaXQgZm9yIHVzLlxyXG4gXHJcblx0Ly8gKi9cclxuXHRsYXNlcnMuY2FsbEFsbCgnZXZlbnRzLm9uT3V0T2ZCb3VuZHMuYWRkJywgJ2V2ZW50cy5vbk91dE9mQm91bmRzJywgcmVzZXRMYXNlcik7XHJcblx0Ly8gLy8gU2FtZSBhcyBhYm92ZSwgc2V0IHRoZSBhbmNob3Igb2YgZXZlcnkgc3ByaXRlIHRvIDAuNSwgMS4wXHJcblx0bGFzZXJzLmNhbGxBbGwoJ2FuY2hvci5zZXRUbycsICdhbmNob3InLCAwLjUsIDEuMCk7XHJcblxyXG5cdC8vIC8vIFRoaXMgd2lsbCBzZXQgJ2NoZWNrV29ybGRCb3VuZHMnIHRvIHRydWUgb24gYWxsIHNwcml0ZXMgaW4gdGhlIGdyb3VwXHJcblx0bGFzZXJzLnNldEFsbCgnY2hlY2tXb3JsZEJvdW5kcycsIHRydWUpO1xyXG5cclxuXHQvLyBUaGUgcGxheWVyIGFuZCBpdHMgc2V0dGluZ3NcclxuXHRwbGF5ZXIgPSBnYW1lLmFkZC5zcHJpdGUoMzUwLCBnYW1lLndvcmxkLmhlaWdodCAtIDE1MCwgJ2R1ZGUnKTtcclxuXHJcblx0Ly8gIFdlIG5lZWQgdG8gZW5hYmxlIHBoeXNpY3Mgb24gdGhlIHBsYXllclxyXG5cdGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHBsYXllcik7XHJcblxyXG5cdC8vICBQbGF5ZXIgcGh5c2ljcyBwcm9wZXJ0aWVzLiBHaXZlIHRoZSBsaXR0bGUgZ3V5IGEgc2xpZ2h0IGJvdW5jZS5cclxuXHRwbGF5ZXIuYm9keS5ib3VuY2UueSA9IDAuNTtcclxuXHRwbGF5ZXIuYm9keS5ncmF2aXR5LnkgPSAwO1xyXG5cdHBsYXllci5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IHRydWU7XHJcblx0cGxheWVyLmJvZHkuc2V0U2l6ZSg1MCwgNTAsIDI1LCAyNSk7XHJcblx0Ly8gIE91ciB0d28gYW5pbWF0aW9ucywgd2Fsa2luZyBsZWZ0IGFuZCByaWdodC5cclxuXHRwbGF5ZXIuYW5pbWF0aW9ucy5hZGQoJ2xlZnQnLCBbMl0sIDEwLCB0cnVlKTtcclxuXHRwbGF5ZXIuYW5pbWF0aW9ucy5hZGQoJ3JpZ2h0JywgWzFdLCAxMCwgdHJ1ZSk7XHJcblx0cGxheWVyLmFuaW1hdGlvbnMuYWRkKCdzdGlsbCcsIFswLCA1XSwgMTAsIHRydWUpO1xyXG5cclxuXHJcblx0Ly8gVGhlIGJhZGRpZXMhXHJcblx0ZW5lbWllcyA9IGdhbWUuYWRkLmdyb3VwKCk7XHJcblx0ZW5lbWllcy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuXHRlbmVtaWVzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLkFSQ0FERTtcclxuXHRlbmVtaWVzLmNyZWF0ZU11bHRpcGxlKDUsICdlbmVteScpO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdhbmNob3IueCcsIDAuNSk7XHJcblx0ZW5lbWllcy5zZXRBbGwoJ2FuY2hvci55JywgMC41KTtcclxuXHRlbmVtaWVzLnNldEFsbCgnc2NhbGUueCcsIDAuNSk7XHJcblx0ZW5lbWllcy5zZXRBbGwoJ3NjYWxlLnknLCAwLjUpO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdhbmdsZScsIDE4MCk7XHJcblx0ZW5lbWllcy5zZXRBbGwoJ291dE9mQm91bmRzS2lsbCcsIHRydWUpO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdjaGVja1dvcmxkQm91bmRzJywgdHJ1ZSk7XHJcblx0bGF1bmNoR3JlZW5FbmVteSgpO1xyXG5cclxuXHQvLyAgQW4gZXhwbG9zaW9uIHBvb2xcclxuXHRleHBsb3Npb25zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHRleHBsb3Npb25zLmVuYWJsZUJvZHkgPSB0cnVlO1xyXG5cdGV4cGxvc2lvbnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cdGV4cGxvc2lvbnMuY3JlYXRlTXVsdGlwbGUoMzAsICdleHBsb3Npb24nKTtcclxuXHRleHBsb3Npb25zLnNldEFsbCgnYW5jaG9yLngnLCAwLjUpO1xyXG5cdGV4cGxvc2lvbnMuc2V0QWxsKCdhbmNob3IueScsIDAuNSk7XHJcblx0ZXhwbG9zaW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGV4cGxvc2lvbikge1xyXG5cdFx0ZXhwbG9zaW9uLmFuaW1hdGlvbnMuYWRkKCdleHBsb3Npb24nKTtcclxuXHR9KTtcclxuXHQvLyAgT3VyIGNvbnRyb2xzLlxyXG5cdGN1cnNvcnMgPSBnYW1lLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcclxuXHJcblx0Z2FtZS5jYW1lcmEuZm9sbG93KHBsYXllcik7XHJcblxyXG5cdGZpcmVCdXR0b24gPSBnYW1lLmlucHV0LmtleWJvYXJkLmFkZEtleShQaGFzZXIuS2V5Ym9hcmQuU1BBQ0VCQVIpO1xyXG5cclxuXHJcblxyXG5cdGRpZmZpY3VsdHlUZXh0ID0gZ2FtZS5hZGQudGV4dCgxNiwgMTYsICdEaWZmaWN1bHR5IExldmVsOiAwJywgeyBmb250U2l6ZTogJzMycHgnLCBmaWxsOiAnI2ZmZicgfSk7XHJcblx0c2NvcmVUZXh0ID0gZ2FtZS5hZGQudGV4dCgxNiwgNjAsICdTY29yZTogMCcsIHsgZm9udFNpemU6ICczMnB4JywgZmlsbDogJyNmZmYnIH0pO1xyXG5cclxuXHRzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuXHRcdGlmIChkaWZmaWN1bHR5ID4gMSkge1xyXG5cdFx0XHRkaWZmaWN1bHR5ID0gZGlmZmljdWx0eSAtIDE7XHJcblx0XHR9XHJcblx0XHRkaWZmaWN1bHR5TGV2ZWxUZXh0ID0gZGlmZmljdWx0eUxldmVsVGV4dCArIDE7XHJcblx0XHRkaWZmaWN1bHR5VGV4dC50ZXh0ID0gJ0RpZmZpY3VsdHkgTGV2ZWw6ICcgKyBkaWZmaWN1bHR5TGV2ZWxUZXh0O1xyXG5cclxuXHRcdGlmIChkaWZmaWN1bHR5ID4gMjApIHtcclxuXHRcdFx0ZW5lbXlTcGVlZCA9IGVuZW15U3BlZWQgKyAyMDtcclxuXHRcdH0gZWxzZSBpZiAoZGlmZmljdWx0eSA+IDEwICYmIGRpZmZpY3VsdHkgPD0gMjApIHtcclxuXHRcdFx0ZW5lbXlTcGVlZCA9IGVuZW15U3BlZWQgKyAxNTtcclxuXHRcdH0gZWxzZSBpZiAoZGlmZmljdWx0eSA8PSAxMCkge1xyXG5cdFx0XHRlbmVteVNwZWVkID0gZW5lbXlTcGVlZCArIDEwO1xyXG5cdFx0fVxyXG5cdFx0c2NvcmUgPSBzY29yZSArIDEwO1xyXG5cdFx0c2NvcmVUZXh0LnRleHQgPSAnU2NvcmU6ICcgKyBzY29yZTtcclxuXHJcblxyXG5cdH0sIDMwMDApXHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gdXBkYXRlKCkge1xyXG5cclxuXHQvLyAgQ29sbGlkZSB0aGUgcGxheWVyIGFuZCB0aGUgc3RhcnMgd2l0aCB0aGUgcGxhdGZvcm1zXHJcblx0Z2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHBsYXllciwgcGxhdGZvcm1zKTtcclxuXHJcblxyXG5cdC8vICBSZXNldCB0aGUgcGxheWVycyB2ZWxvY2l0eSAobW92ZW1lbnQpXHJcblx0cGxheWVyLmJvZHkudmVsb2NpdHkueCA9IDA7XHJcblx0cGxheWVyLmJvZHkudmVsb2NpdHkueSA9IDA7XHJcblx0Ly8gcGxheWVyLmJvZHkudmVsb2NpdHkueSA9IC0xNTA7XHJcblxyXG5cclxuXHRpZiAoY3Vyc29ycy5sZWZ0LmlzRG93bikge1xyXG5cdFx0Ly8gIE1vdmUgdG8gdGhlIGxlZnRcclxuXHRcdHBsYXllci5ib2R5LnZlbG9jaXR5LnggPSAtMTUwO1xyXG5cdFx0Ly8gcGxheWVyLmFuaW1hdGlvbnMucGxheSgnbGVmdCcpO1xyXG5cdH0gZWxzZSBpZiAoY3Vyc29ycy5yaWdodC5pc0Rvd24pIHtcclxuXHRcdC8vICBNb3ZlIHRvIHRoZSByaWdodFxyXG5cdFx0cGxheWVyLmJvZHkudmVsb2NpdHkueCA9IDE1MDtcclxuXHJcblx0XHQvLyBwbGF5ZXIuYW5pbWF0aW9ucy5wbGF5KCdyaWdodCcpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyAgU3RhbmQgc3RpbGxcclxuXHRcdC8vIHBsYXllci5hbmltYXRpb25zLnN0b3AoKTtcclxuXHJcblx0XHRwbGF5ZXIuYW5pbWF0aW9ucy5wbGF5KCdzdGlsbCcpO1xyXG5cdH1cclxuXHJcblx0Ly8gIEFsbG93IHRoZSBwbGF5ZXIgdG8ganVtcCBpZiB0aGV5IGFyZSB0b3VjaGluZyB0aGUgZ3JvdW5kLlxyXG5cdGlmIChjdXJzb3JzLnVwLmlzRG93bikge1xyXG5cdFx0cGxheWVyLmJvZHkudmVsb2NpdHkueSA9IC0xNTA7XHJcblx0fVxyXG5cclxuXHRpZiAoY3Vyc29ycy5kb3duLmlzRG93bikge1xyXG5cdFx0cGxheWVyLmJvZHkudmVsb2NpdHkueSA9IDEwMDtcclxuXHR9XHJcblxyXG5cdGlmIChmaXJlQnV0dG9uLmlzRG93bikge1xyXG5cdFx0cGxheWVyRmlyZXMoKTtcclxuXHR9XHJcblxyXG5cdGdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChsYXNlcnMsIGVuZW1pZXMsIHNoaXBDb2xsaWRlLCBudWxsLCB0aGlzKTtcclxuXHRnYW1lLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAocGxheWVyLCBlbmVtaWVzLCBwbGF5ZXJDb2xsaWRlLCBudWxsLCB0aGlzKTtcclxuXHRzdGFyZmllbGQudGlsZVBvc2l0aW9uLnkgKz0gMztcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNoaXBDb2xsaWRlKHBsYXllciwgZW5lbXkpIHtcclxuXHR2YXIgZXhwbG9zaW9uID0gZXhwbG9zaW9ucy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcblx0ZXhwbG9zaW9uLnJlc2V0KGVuZW15LmJvZHkueCArIGVuZW15LmJvZHkuaGFsZldpZHRoLCBlbmVteS5ib2R5LnkgKyBlbmVteS5ib2R5LmhhbGZIZWlnaHQpO1xyXG5cdGV4cGxvc2lvbi5ib2R5LnZlbG9jaXR5LnkgPSBlbmVteS5ib2R5LnZlbG9jaXR5Lnk7XHJcblx0ZXhwbG9zaW9uLmFscGhhID0gMC43O1xyXG5cdGV4cGxvc2lvbi5wbGF5KCdleHBsb3Npb24nLCAzMCwgZmFsc2UsIHRydWUpO1xyXG5cdGVuZW15LmtpbGwoKTtcclxuXHRzY29yZSA9IHNjb3JlICsgNTtcclxuXHRzY29yZVRleHQudGV4dCA9ICdTY29yZTogJyArIHNjb3JlO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gcGxheWVyQ29sbGlkZShwbGF5ZXIsIGVuZW15KSB7XHJcblx0dmFyIGV4cGxvc2lvbiA9IGV4cGxvc2lvbnMuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xyXG5cdGV4cGxvc2lvbi5yZXNldChwbGF5ZXIuYm9keS54ICsgcGxheWVyLmJvZHkuaGFsZldpZHRoLCBwbGF5ZXIuYm9keS55ICsgcGxheWVyLmJvZHkuaGFsZkhlaWdodCk7XHJcblx0ZXhwbG9zaW9uLmJvZHkudmVsb2NpdHkueSA9IHBsYXllci5ib2R5LnZlbG9jaXR5Lnk7XHJcblx0ZXhwbG9zaW9uLmFscGhhID0gMC43O1xyXG5cdGV4cGxvc2lvbi5wbGF5KCdleHBsb3Npb24nLCAzMCwgZmFsc2UsIHRydWUpO1xyXG5cdHBsYXllci5raWxsKCk7XHJcbn1cclxuXHJcbi8vIGRlYnVnXHJcbi8vIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuLy8gXHRnYW1lLmRlYnVnLmJvZHlJbmZvKHBsYXllciwgMzIsIDMyKTtcclxuLy8gXHRnYW1lLmRlYnVnLmJvZHkocGxheWVyKTtcclxuLy8gXHRlbmVtaWVzLmNoaWxkcmVuLmZvckVhY2goKGVuZW15KSA9PiB7XHJcbi8vIFx0XHRnYW1lLmRlYnVnLmJvZHkoZW5lbXkpO1xyXG4vLyBcdH0pXHJcbi8vIH1cclxuXHJcbmZ1bmN0aW9uIHBsYXllckZpcmVzKCkge1xyXG5cdC8vIEdldCB0aGUgZmlyc3QgbGFzZXIgdGhhdCdzIGluYWN0aXZlLCBieSBwYXNzaW5nICdmYWxzZScgYXMgYSBwYXJhbWV0ZXJcclxuXHR2YXIgbGFzZXIgPSBsYXNlcnMuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xyXG5cdGlmIChsYXNlcikge1xyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBhIGxhc2VyLCBzZXQgaXQgdG8gdGhlIHN0YXJ0aW5nIHBvc2l0aW9uXHJcblx0XHRsYXNlci5yZXNldChwbGF5ZXIueCArIDUwLCBwbGF5ZXIueSAtIDIwKTtcclxuXHRcdC8vIEdpdmUgaXQgYSB2ZWxvY2l0eSBvZiAtNTAwIHNvIGl0IHN0YXJ0cyBzaG9vdGluZ1xyXG5cdFx0bGFzZXIuYm9keS52ZWxvY2l0eS55ID0gLTUwMDtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlc2V0TGFzZXIobGFzZXIpIHtcclxuXHQvLyBEZXN0cm95IHRoZSBsYXNlclxyXG5cdGxhc2VyLmtpbGwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbGF1bmNoR3JlZW5FbmVteSgpIHtcclxuXHRsZXQgZGlmZmljdWx0eU11bHRpID0gZGlmZmljdWx0eSAqIDEwO1xyXG5cdHZhciBNSU5fRU5FTVlfU1BBQ0lORyA9IGRpZmZpY3VsdHlNdWx0aTtcclxuXHR2YXIgTUFYX0VORU1ZX1NQQUNJTkcgPSBkaWZmaWN1bHR5TXVsdGkgKiAxMDtcclxuXHR2YXIgRU5FTVlfU1BFRUQgPSBlbmVteVNwZWVkO1xyXG5cclxuXHR2YXIgZW5lbXkgPSBlbmVtaWVzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuXHRpZiAoZW5lbXkpIHtcclxuXHRcdGVuZW15LnJlc2V0KGdhbWUucm5kLmludGVnZXJJblJhbmdlKDAsIGdhbWUud2lkdGgpLCAtMjApO1xyXG5cdFx0ZW5lbXkuYm9keS52ZWxvY2l0eS54ID0gZ2FtZS5ybmQuaW50ZWdlckluUmFuZ2UoLTMwMCwgMzAwKTtcclxuXHRcdGVuZW15LmJvZHkudmVsb2NpdHkueSA9IEVORU1ZX1NQRUVEO1xyXG5cdFx0ZW5lbXkuYm9keS5kcmFnLnggPSAxMDA7XHJcblx0XHRlbmVteS5ib2R5LnNldFNpemUoNTAsIDUwKTtcclxuXHRcdGVuZW15LnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRlbmVteS5hbmdsZSA9IDE4MCAtIGdhbWUubWF0aC5yYWRUb0RlZyhNYXRoLmF0YW4yKGVuZW15LmJvZHkudmVsb2NpdHkueCwgZW5lbXkuYm9keS52ZWxvY2l0eS55KSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vICBTZW5kIGFub3RoZXIgZW5lbXkgc29vblxyXG5cdGdhbWUudGltZS5ldmVudHMuYWRkKGdhbWUucm5kLmludGVnZXJJblJhbmdlKE1JTl9FTkVNWV9TUEFDSU5HLCBNQVhfRU5FTVlfU1BBQ0lORyksIGxhdW5jaEdyZWVuRW5lbXkpO1xyXG5cclxufVxyXG4iXX0=
