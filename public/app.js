(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

function preload() {

	game.load.image('sky', 'assets/sky.png');
	game.load.image('ground', 'assets/platform.png');
	game.load.image('star', 'assets/star.png');
	game.load.spritesheet('dude', 'assets/plane.png', 100, 100);
	game.load.image('starfield', 'assets/starfield.png');
	game.load.image('laser', 'assets/bullet.png');
	game.load.image('enemy', 'assets/baddie.png');
	game.load.spritesheet('explosion', 'https://raw.githubusercontent.com/jschomay/phaser-demo-game/master/assets/explode.png', 128, 128);
}

var player = void 0;
var platforms = void 0;
var cursors = void 0;

var stars = void 0;
var score = 0;
var scoreText = void 0;
var starfield = void 0;
var fireButton = void 0;
var ship = void 0;
var lasers = void 0;
var mouseTouchDown = false;
var enemies = void 0;
var explosions = void 0;
var difficulty = 30;
var enemySpeed = 200;
var difficultyLevelText = 0;
var difficultyText = void 0;

function create() {

	//  Make the world larger than the actual canvas
	// game.world.setBounds(0, 0, 800, 10000);

	starfield = game.add.tileSprite(0, 0, 800, 600, 'starfield');

	//  We're going to be using physics, so enable the Arcade Physics system
	game.physics.startSystem(Phaser.Physics.ARCADE);

	//  A simple background for our game
	// game.add.sprite(0, 0, 'sky');

	//  The platforms group contains the ground and the 2 ledges we can jump on
	platforms = game.add.group();

	//  We will enable physics for any object that is created in this group
	platforms.enableBody = true;

	// Create the group using the group factory
	lasers = game.add.group();
	// To move the sprites later on, we have to enable the body
	lasers.enableBody = true;
	// We're going to set the body type to the ARCADE physics, since we don't need any advanced physics
	lasers.physicsBodyType = Phaser.Physics.ARCADE;
	/*
 
 	This will create 20 sprites and add it to the stage. They're inactive and invisible, but they're there for later use.
 	We only have 20 laser bullets available, and will 'clean' and reset they're off the screen.
 	This way we save on precious resources by not constantly adding & removing new sprites to the stage
 
 */
	lasers.createMultiple(2, 'laser');

	/*
 
 	Behind the scenes, this will call the following function on all lasers:
 		- events.onOutOfBounds.add(resetLaser)
 	Every sprite has an 'events' property, where you can add callbacks to specific events.
 	Instead of looping over every sprite in the group manually, this function will do it for us.
 
 // */
	lasers.callAll('events.onOutOfBounds.add', 'events.onOutOfBounds', resetLaser);
	// // Same as above, set the anchor of every sprite to 0.5, 1.0
	lasers.callAll('anchor.setTo', 'anchor', 0.5, 1.0);

	// // This will set 'checkWorldBounds' to true on all sprites in the group
	lasers.setAll('checkWorldBounds', true);

	// The player and its settings
	player = game.add.sprite(350, game.world.height - 150, 'dude');

	//  We need to enable physics on the player
	game.physics.arcade.enable(player);

	//  Player physics properties. Give the little guy a slight bounce.
	player.body.bounce.y = 0.5;
	player.body.gravity.y = 0;
	player.body.collideWorldBounds = true;

	//  Our two animations, walking left and right.
	player.animations.add('left', [2], 10, true);
	player.animations.add('right', [1], 10, true);
	player.animations.add('still', [0, 5], 10, true);

	// The baddies!
	enemies = game.add.group();
	enemies.enableBody = true;
	enemies.physicsBodyType = Phaser.Physics.ARCADE;
	enemies.createMultiple(5, 'enemy');
	enemies.setAll('anchor.x', 0.5);
	enemies.setAll('anchor.y', 0.5);
	enemies.setAll('scale.x', 0.5);
	enemies.setAll('scale.y', 0.5);
	enemies.setAll('angle', 180);
	enemies.setAll('outOfBoundsKill', true);
	enemies.setAll('checkWorldBounds', true);

	launchGreenEnemy();

	//  An explosion pool
	explosions = game.add.group();
	explosions.enableBody = true;
	explosions.physicsBodyType = Phaser.Physics.ARCADE;
	explosions.createMultiple(30, 'explosion');
	explosions.setAll('anchor.x', 0.5);
	explosions.setAll('anchor.y', 0.5);
	explosions.forEach(function (explosion) {
		explosion.animations.add('explosion');
	});
	//  Our controls.
	cursors = game.input.keyboard.createCursorKeys();

	game.camera.follow(player);

	fireButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);

	difficultyText = game.add.text(16, 16, 'Difficulty: 0', { fontSize: '32px', fill: '#fff' });
	setInterval(function () {
		if (difficulty > 1) {
			difficulty = difficulty - 1;
		}
		difficultyLevelText = difficultyLevelText + 1;
		difficultyText.text = 'Difficulty Level: ' + difficultyLevelText;

		if (difficulty > 20) {
			enemySpeed = enemySpeed + 20;
		} else if (difficulty > 10 && difficulty <= 20) {
			enemySpeed = enemySpeed + 15;
		} else if (difficulty <= 10) {
			enemySpeed = enemySpeed + 10;
		}
	}, 3000);
}

function update() {

	//  Collide the player and the stars with the platforms
	game.physics.arcade.collide(player, platforms);

	//  Reset the players velocity (movement)
	player.body.velocity.x = 0;
	player.body.velocity.y = 0;
	// player.body.velocity.y = -150;


	if (cursors.left.isDown) {
		//  Move to the left
		player.body.velocity.x = -150;
		// player.animations.play('left');
	} else if (cursors.right.isDown) {
		//  Move to the right
		player.body.velocity.x = 150;

		// player.animations.play('right');
	} else {
		//  Stand still
		// player.animations.stop();

		player.animations.play('still');
	}

	//  Allow the player to jump if they are touching the ground.
	if (cursors.up.isDown) {
		player.body.velocity.y = -150;
	}

	if (cursors.down.isDown) {
		player.body.velocity.y = 100;
	}

	if (fireButton.isDown) {
		playerFires();
	}

	game.physics.arcade.overlap(lasers, enemies, shipCollide, null, this);
	game.physics.arcade.overlap(player, enemies, playerCollide, null, this);
	starfield.tilePosition.y += 3;
}

function shipCollide(player, enemy) {
	var explosion = explosions.getFirstExists(false);
	explosion.reset(enemy.body.x + enemy.body.halfWidth, enemy.body.y + enemy.body.halfHeight);
	explosion.body.velocity.y = enemy.body.velocity.y;
	explosion.alpha = 0.7;
	explosion.play('explosion', 30, false, true);
	enemy.kill();
}

function playerCollide(player, enemy) {
	var explosion = explosions.getFirstExists(false);
	explosion.reset(player.body.x + player.body.halfWidth, player.body.y + player.body.halfHeight);
	explosion.body.velocity.y = player.body.velocity.y;
	explosion.alpha = 0.7;
	explosion.play('explosion', 30, false, true);
	player.kill();
}

function playerFires() {
	// Get the first laser that's inactive, by passing 'false' as a parameter
	var laser = lasers.getFirstExists(false);
	if (laser) {
		// If we have a laser, set it to the starting position
		laser.reset(player.x + 50, player.y - 20);
		// Give it a velocity of -500 so it starts shooting
		laser.body.velocity.y = -500;
	}
}

function resetLaser(laser) {
	// Destroy the laser
	laser.kill();
}

function launchGreenEnemy() {
	var difficultyMulti = difficulty * 10;
	var MIN_ENEMY_SPACING = difficultyMulti;
	var MAX_ENEMY_SPACING = difficultyMulti * 10;
	var ENEMY_SPEED = enemySpeed;

	var enemy = enemies.getFirstExists(false);
	if (enemy) {
		enemy.reset(game.rnd.integerInRange(0, game.width), -20);
		enemy.body.velocity.x = game.rnd.integerInRange(-300, 300);
		enemy.body.velocity.y = ENEMY_SPEED;
		enemy.body.drag.x = 100;
		enemy.update = function () {
			enemy.angle = 180 - game.math.radToDeg(Math.atan2(enemy.body.velocity.x, enemy.body.velocity.y));
		};
	}
	//  Send another enemy soon
	game.time.events.add(game.rnd.integerInRange(MIN_ENEMY_SPACING, MAX_ENEMY_SPACING), launchGreenEnemy);
}

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmNcXGFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEsSUFBTSxPQUFPLElBQUksT0FBTyxJQUFYLENBQWdCLEdBQWhCLEVBQXFCLEdBQXJCLEVBQTBCLE9BQU8sSUFBakMsRUFBdUMsRUFBdkMsRUFBMkMsRUFBRSxTQUFTLE9BQVgsRUFBb0IsUUFBUSxNQUE1QixFQUFvQyxRQUFRLE1BQTVDLEVBQTNDLENBQWI7O0FBRUEsU0FBUyxPQUFULEdBQW1COztBQUVsQixNQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLEtBQWhCLEVBQXVCLGdCQUF2QjtBQUNBLE1BQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsUUFBaEIsRUFBMEIscUJBQTFCO0FBQ0EsTUFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixNQUFoQixFQUF3QixpQkFBeEI7QUFDQSxNQUFLLElBQUwsQ0FBVSxXQUFWLENBQXNCLE1BQXRCLEVBQThCLGtCQUE5QixFQUFrRCxHQUFsRCxFQUF1RCxHQUF2RDtBQUNBLE1BQUssSUFBTCxDQUFVLEtBQVYsQ0FBZ0IsV0FBaEIsRUFBNkIsc0JBQTdCO0FBQ0EsTUFBSyxJQUFMLENBQVUsS0FBVixDQUFnQixPQUFoQixFQUF5QixtQkFBekI7QUFDQSxNQUFLLElBQUwsQ0FBVSxLQUFWLENBQWdCLE9BQWhCLEVBQXlCLG1CQUF6QjtBQUNBLE1BQUssSUFBTCxDQUFVLFdBQVYsQ0FBc0IsV0FBdEIsRUFBbUMsdUZBQW5DLEVBQTRILEdBQTVILEVBQWlJLEdBQWpJO0FBQ0E7O0FBRUQsSUFBSSxlQUFKO0FBQ0EsSUFBSSxrQkFBSjtBQUNBLElBQUksZ0JBQUo7O0FBRUEsSUFBSSxjQUFKO0FBQ0EsSUFBSSxRQUFRLENBQVo7QUFDQSxJQUFJLGtCQUFKO0FBQ0EsSUFBSSxrQkFBSjtBQUNBLElBQUksbUJBQUo7QUFDQSxJQUFJLGFBQUo7QUFDQSxJQUFJLGVBQUo7QUFD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QUFMLENBQVUsTUFBVixDQUFpQixHQUFqQixDQUFxQixLQUFLLEdBQUwsQ0FBUyxjQUFULENBQXdCLGlCQUF4QixFQUEyQyxpQkFBM0MsQ0FBckIsRUFBb0YsZ0JBQXBGO0FBRUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc3QgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDYwMCwgUGhhc2VyLkFVVE8sICcnLCB7IHByZWxvYWQ6IHByZWxvYWQsIGNyZWF0ZTogY3JlYXRlLCB1cGRhdGU6IHVwZGF0ZSB9KTtcclxuXHJcbmZ1bmN0aW9uIHByZWxvYWQoKSB7XHJcblxyXG5cdGdhbWUubG9hZC5pbWFnZSgnc2t5JywgJ2Fzc2V0cy9za3kucG5nJyk7XHJcblx0Z2FtZS5sb2FkLmltYWdlKCdncm91bmQnLCAnYXNzZXRzL3BsYXRmb3JtLnBuZycpO1xyXG5cdGdhbWUubG9hZC5pbWFnZSgnc3RhcicsICdhc3NldHMvc3Rhci5wbmcnKTtcclxuXHRnYW1lLmxvYWQuc3ByaXRlc2hlZXQoJ2R1ZGUnLCAnYXNzZXRzL3BsYW5lLnBuZycsIDEwMCwgMTAwKTtcclxuXHRnYW1lLmxvYWQuaW1hZ2UoJ3N0YXJmaWVsZCcsICdhc3NldHMvc3RhcmZpZWxkLnBuZycpO1xyXG5cdGdhbWUubG9hZC5pbWFnZSgnbGFzZXInLCAnYXNzZXRzL2J1bGxldC5wbmcnKTtcclxuXHRnYW1lLmxvYWQuaW1hZ2UoJ2VuZW15JywgJ2Fzc2V0cy9iYWRkaWUucG5nJyk7XHJcblx0Z2FtZS5sb2FkLnNwcml0ZXNoZWV0KCdleHBsb3Npb24nLCAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pzY2hvbWF5L3BoYXNlci1kZW1vLWdhbWUvbWFzdGVyL2Fzc2V0cy9leHBsb2RlLnBuZycsIDEyOCwgMTI4KTtcclxufVxyXG5cclxubGV0IHBsYXllcjtcclxubGV0IHBsYXRmb3JtcztcclxubGV0IGN1cnNvcnM7XHJcblxyXG5sZXQgc3RhcnM7XHJcbmxldCBzY29yZSA9IDA7XHJcbmxldCBzY29yZVRleHQ7XHJcbmxldCBzdGFyZmllbGQ7XHJcbmxldCBmaXJlQnV0dG9uO1xyXG5sZXQgc2hpcDtcclxubGV0IGxhc2VycztcclxubGV0IG1vdXNlVG91Y2hEb3duID0gZmFsc2U7XHJcbmxldCBlbmVtaWVzO1xyXG5sZXQgZXhwbG9zaW9ucztcclxubGV0IGRpZmZpY3VsdHkgPSAzMDtcclxubGV0IGVuZW15U3BlZWQgPSAyMDA7XHJcbmxldCBkaWZmaWN1bHR5TGV2ZWxUZXh0ID0gMDtcclxubGV0IGRpZmZpY3VsdHlUZXh0XHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlKCkge1xyXG5cclxuXHQvLyAgTWFrZSB0aGUgd29ybGQgbGFyZ2VyIHRoYW4gdGhlIGFjdHVhbCBjYW52YXNcclxuXHQvLyBnYW1lLndvcmxkLnNldEJvdW5kcygwLCAwLCA4MDAsIDEwMDAwKTtcclxuXHJcblx0c3RhcmZpZWxkID0gZ2FtZS5hZGQudGlsZVNwcml0ZSgwLCAwLCA4MDAsIDYwMCwgJ3N0YXJmaWVsZCcpO1xyXG5cclxuXHQvLyAgV2UncmUgZ29pbmcgdG8gYmUgdXNpbmcgcGh5c2ljcywgc28gZW5hYmxlIHRoZSBBcmNhZGUgUGh5c2ljcyBzeXN0ZW1cclxuXHRnYW1lLnBoeXNpY3Muc3RhcnRTeXN0ZW0oUGhhc2VyLlBoeXNpY3MuQVJDQURFKTtcclxuXHJcblx0Ly8gIEEgc2ltcGxlIGJhY2tncm91bmQgZm9yIG91ciBnYW1lXHJcblx0Ly8gZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICdza3knKTtcclxuXHJcblx0Ly8gIFRoZSBwbGF0Zm9ybXMgZ3JvdXAgY29udGFpbnMgdGhlIGdyb3VuZCBhbmQgdGhlIDIgbGVkZ2VzIHdlIGNhbiBqdW1wIG9uXHJcblx0cGxhdGZvcm1zID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHJcblx0Ly8gIFdlIHdpbGwgZW5hYmxlIHBoeXNpY3MgZm9yIGFueSBvYmplY3QgdGhhdCBpcyBjcmVhdGVkIGluIHRoaXMgZ3JvdXBcclxuXHRwbGF0Zm9ybXMuZW5hYmxlQm9keSA9IHRydWU7XHJcblxyXG5cclxuXHQvLyBDcmVhdGUgdGhlIGdyb3VwIHVzaW5nIHRoZSBncm91cCBmYWN0b3J5XHJcblx0bGFzZXJzID0gZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHQvLyBUbyBtb3ZlIHRoZSBzcHJpdGVzIGxhdGVyIG9uLCB3ZSBoYXZlIHRvIGVuYWJsZSB0aGUgYm9keVxyXG5cdGxhc2Vycy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuXHQvLyBXZSdyZSBnb2luZyB0byBzZXQgdGhlIGJvZHkgdHlwZSB0byB0aGUgQVJDQURFIHBoeXNpY3MsIHNpbmNlIHdlIGRvbid0IG5lZWQgYW55IGFkdmFuY2VkIHBoeXNpY3NcclxuXHRsYXNlcnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuQVJDQURFO1xyXG5cdC8qXHJcbiBcclxuXHRcdFRoaXMgd2lsbCBjcmVhdGUgMjAgc3ByaXRlcyBhbmQgYWRkIGl0IHRvIHRoZSBzdGFnZS4gVGhleSdyZSBpbmFjdGl2ZSBhbmQgaW52aXNpYmxlLCBidXQgdGhleSdyZSB0aGVyZSBmb3IgbGF0ZXIgdXNlLlxyXG5cdFx0V2Ugb25seSBoYXZlIDIwIGxhc2VyIGJ1bGxldHMgYXZhaWxhYmxlLCBhbmQgd2lsbCAnY2xlYW4nIGFuZCByZXNldCB0aGV5J3JlIG9mZiB0aGUgc2NyZWVuLlxyXG5cdFx0VGhpcyB3YXkgd2Ugc2F2ZSBvbiBwcmVjaW91cyByZXNvdXJjZXMgYnkgbm90IGNvbnN0YW50bHkgYWRkaW5nICYgcmVtb3ZpbmcgbmV3IHNwcml0ZXMgdG8gdGhlIHN0YWdlXHJcbiBcclxuXHQqL1xyXG5cdGxhc2Vycy5jcmVhdGVNdWx0aXBsZSgyLCAnbGFzZXInKTtcclxuXHJcblx0LypcclxuIFxyXG5cdFx0QmVoaW5kIHRoZSBzY2VuZXMsIHRoaXMgd2lsbCBjYWxsIHRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gb24gYWxsIGxhc2VyczpcclxuXHRcdFx0LSBldmVudHMub25PdXRPZkJvdW5kcy5hZGQocmVzZXRMYXNlcilcclxuXHRcdEV2ZXJ5IHNwcml0ZSBoYXMgYW4gJ2V2ZW50cycgcHJvcGVydHksIHdoZXJlIHlvdSBjYW4gYWRkIGNhbGxiYWNrcyB0byBzcGVjaWZpYyBldmVudHMuXHJcblx0XHRJbnN0ZWFkIG9mIGxvb3Bpbmcgb3ZlciBldmVyeSBzcHJpdGUgaW4gdGhlIGdyb3VwIG1hbnVhbGx5LCB0aGlzIGZ1bmN0aW9uIHdpbGwgZG8gaXQgZm9yIHVzLlxyXG4gXHJcblx0Ly8gKi9cclxuXHRsYXNlcnMuY2FsbEFsbCgnZXZlbnRzLm9uT3V0T2ZCb3VuZHMuYWRkJywgJ2V2ZW50cy5vbk91dE9mQm91bmRzJywgcmVzZXRMYXNlcik7XHJcblx0Ly8gLy8gU2FtZSBhcyBhYm92ZSwgc2V0IHRoZSBhbmNob3Igb2YgZXZlcnkgc3ByaXRlIHRvIDAuNSwgMS4wXHJcblx0bGFzZXJzLmNhbGxBbGwoJ2FuY2hvci5zZXRUbycsICdhbmNob3InLCAwLjUsIDEuMCk7XHJcblxyXG5cdC8vIC8vIFRoaXMgd2lsbCBzZXQgJ2NoZWNrV29ybGRCb3VuZHMnIHRvIHRydWUgb24gYWxsIHNwcml0ZXMgaW4gdGhlIGdyb3VwXHJcblx0bGFzZXJzLnNldEFsbCgnY2hlY2tXb3JsZEJvdW5kcycsIHRydWUpO1xyXG5cclxuXHQvLyBUaGUgcGxheWVyIGFuZCBpdHMgc2V0dGluZ3NcclxuXHRwbGF5ZXIgPSBnYW1lLmFkZC5zcHJpdGUoMzUwLCBnYW1lLndvcmxkLmhlaWdodCAtIDE1MCwgJ2R1ZGUnKTtcclxuXHJcblx0Ly8gIFdlIG5lZWQgdG8gZW5hYmxlIHBoeXNpY3Mgb24gdGhlIHBsYXllclxyXG5cdGdhbWUucGh5c2ljcy5hcmNhZGUuZW5hYmxlKHBsYXllcik7XHJcblxyXG5cdC8vICBQbGF5ZXIgcGh5c2ljcyBwcm9wZXJ0aWVzLiBHaXZlIHRoZSBsaXR0bGUgZ3V5IGEgc2xpZ2h0IGJvdW5jZS5cclxuXHRwbGF5ZXIuYm9keS5ib3VuY2UueSA9IDAuNTtcclxuXHRwbGF5ZXIuYm9keS5ncmF2aXR5LnkgPSAwO1xyXG5cdHBsYXllci5ib2R5LmNvbGxpZGVXb3JsZEJvdW5kcyA9IHRydWU7XHJcblxyXG5cdC8vICBPdXIgdHdvIGFuaW1hdGlvbnMsIHdhbGtpbmcgbGVmdCBhbmQgcmlnaHQuXHJcblx0cGxheWVyLmFuaW1hdGlvbnMuYWRkKCdsZWZ0JywgWzJdLCAxMCwgdHJ1ZSk7XHJcblx0cGxheWVyLmFuaW1hdGlvbnMuYWRkKCdyaWdodCcsIFsxXSwgMTAsIHRydWUpO1xyXG5cdHBsYXllci5hbmltYXRpb25zLmFkZCgnc3RpbGwnLCBbMCwgNV0sIDEwLCB0cnVlKTtcclxuXHJcblxyXG5cdC8vIFRoZSBiYWRkaWVzIVxyXG5cdGVuZW1pZXMgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG5cdGVuZW1pZXMuZW5hYmxlQm9keSA9IHRydWU7XHJcblx0ZW5lbWllcy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcblx0ZW5lbWllcy5jcmVhdGVNdWx0aXBsZSg1LCAnZW5lbXknKTtcclxuXHRlbmVtaWVzLnNldEFsbCgnYW5jaG9yLngnLCAwLjUpO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdhbmNob3IueScsIDAuNSk7XHJcblx0ZW5lbWllcy5zZXRBbGwoJ3NjYWxlLngnLCAwLjUpO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdzY2FsZS55JywgMC41KTtcclxuXHRlbmVtaWVzLnNldEFsbCgnYW5nbGUnLCAxODApO1xyXG5cdGVuZW1pZXMuc2V0QWxsKCdvdXRPZkJvdW5kc0tpbGwnLCB0cnVlKTtcclxuXHRlbmVtaWVzLnNldEFsbCgnY2hlY2tXb3JsZEJvdW5kcycsIHRydWUpO1xyXG5cclxuXHRsYXVuY2hHcmVlbkVuZW15KCk7XHJcblxyXG5cdC8vICBBbiBleHBsb3Npb24gcG9vbFxyXG5cdGV4cGxvc2lvbnMgPSBnYW1lLmFkZC5ncm91cCgpO1xyXG5cdGV4cGxvc2lvbnMuZW5hYmxlQm9keSA9IHRydWU7XHJcblx0ZXhwbG9zaW9ucy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5BUkNBREU7XHJcblx0ZXhwbG9zaW9ucy5jcmVhdGVNdWx0aXBsZSgzMCwgJ2V4cGxvc2lvbicpO1xyXG5cdGV4cGxvc2lvbnMuc2V0QWxsKCdhbmNob3IueCcsIDAuNSk7XHJcblx0ZXhwbG9zaW9ucy5zZXRBbGwoJ2FuY2hvci55JywgMC41KTtcclxuXHRleHBsb3Npb25zLmZvckVhY2goZnVuY3Rpb24oZXhwbG9zaW9uKSB7XHJcblx0XHRleHBsb3Npb24uYW5pbWF0aW9ucy5hZGQoJ2V4cGxvc2lvbicpO1xyXG5cdH0pO1xyXG5cdC8vICBPdXIgY29udHJvbHMuXHJcblx0Y3Vyc29ycyA9IGdhbWUuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG5cclxuXHRnYW1lLmNhbWVyYS5mb2xsb3cocGxheWVyKTtcclxuXHJcblx0ZmlyZUJ1dHRvbiA9IGdhbWUuaW5wdXQua2V5Ym9hcmQuYWRkS2V5KFBoYXNlci5LZXlib2FyZC5TUEFDRUJBUik7XHJcblxyXG5cclxuXHJcblx0ZGlmZmljdWx0eVRleHQgPSBnYW1lLmFkZC50ZXh0KDE2LCAxNiwgJ0RpZmZpY3VsdHk6IDAnLCB7IGZvbnRTaXplOiAnMzJweCcsIGZpbGw6ICcjZmZmJyB9KTtcclxuXHRzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuXHRcdGlmIChkaWZmaWN1bHR5ID4gMSkge1xyXG5cdFx0XHRkaWZmaWN1bHR5ID0gZGlmZmljdWx0eSAtIDE7XHJcblx0XHR9XHJcblx0XHRcdGRpZmZpY3VsdHlMZXZlbFRleHQgPSBkaWZmaWN1bHR5TGV2ZWxUZXh0ICsgMTtcclxuXHRcdFx0ZGlmZmljdWx0eVRleHQudGV4dCA9ICdEaWZmaWN1bHR5IExldmVsOiAnICsgZGlmZmljdWx0eUxldmVsVGV4dDtcclxuXHJcblx0XHRpZiAoZGlmZmljdWx0eSA+IDIwKSB7XHJcblx0XHRcdGVuZW15U3BlZWQgPSBlbmVteVNwZWVkICsgMjA7XHJcblx0XHR9IGVsc2UgaWYgKGRpZmZpY3VsdHkgPiAxMCAmJiBkaWZmaWN1bHR5IDw9IDIwKSB7XHJcblx0XHRcdGVuZW15U3BlZWQgPSBlbmVteVNwZWVkICsgMTU7XHJcblx0XHR9IGVsc2UgaWYgKGRpZmZpY3VsdHkgPD0gMTApIHtcclxuXHRcdFx0ZW5lbXlTcGVlZCA9IGVuZW15U3BlZWQgKyAxMDtcclxuXHRcdH1cclxuXHJcblxyXG5cdH0sIDMwMDApXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZSgpIHtcclxuXHJcblx0Ly8gIENvbGxpZGUgdGhlIHBsYXllciBhbmQgdGhlIHN0YXJzIHdpdGggdGhlIHBsYXRmb3Jtc1xyXG5cdGdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZShwbGF5ZXIsIHBsYXRmb3Jtcyk7XHJcblxyXG5cclxuXHQvLyAgUmVzZXQgdGhlIHBsYXllcnMgdmVsb2NpdHkgKG1vdmVtZW50KVxyXG5cdHBsYXllci5ib2R5LnZlbG9jaXR5LnggPSAwO1xyXG5cdHBsYXllci5ib2R5LnZlbG9jaXR5LnkgPSAwO1xyXG5cdC8vIHBsYXllci5ib2R5LnZlbG9jaXR5LnkgPSAtMTUwO1xyXG5cclxuXHJcblx0aWYgKGN1cnNvcnMubGVmdC5pc0Rvd24pIHtcclxuXHRcdC8vICBNb3ZlIHRvIHRoZSBsZWZ0XHJcblx0XHRwbGF5ZXIuYm9keS52ZWxvY2l0eS54ID0gLTE1MDtcclxuXHRcdC8vIHBsYXllci5hbmltYXRpb25zLnBsYXkoJ2xlZnQnKTtcclxuXHR9IGVsc2UgaWYgKGN1cnNvcnMucmlnaHQuaXNEb3duKSB7XHJcblx0XHQvLyAgTW92ZSB0byB0aGUgcmlnaHRcclxuXHRcdHBsYXllci5ib2R5LnZlbG9jaXR5LnggPSAxNTA7XHJcblxyXG5cdFx0Ly8gcGxheWVyLmFuaW1hdGlvbnMucGxheSgncmlnaHQnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gIFN0YW5kIHN0aWxsXHJcblx0XHQvLyBwbGF5ZXIuYW5pbWF0aW9ucy5zdG9wKCk7XHJcblxyXG5cdFx0cGxheWVyLmFuaW1hdGlvbnMucGxheSgnc3RpbGwnKTtcclxuXHR9XHJcblxyXG5cdC8vICBBbGxvdyB0aGUgcGxheWVyIHRvIGp1bXAgaWYgdGhleSBhcmUgdG91Y2hpbmcgdGhlIGdyb3VuZC5cclxuXHRpZiAoY3Vyc29ycy51cC5pc0Rvd24pIHtcclxuXHRcdHBsYXllci5ib2R5LnZlbG9jaXR5LnkgPSAtMTUwO1xyXG5cdH1cclxuXHJcblx0aWYgKGN1cnNvcnMuZG93bi5pc0Rvd24pIHtcclxuXHRcdHBsYXllci5ib2R5LnZlbG9jaXR5LnkgPSAxMDA7XHJcblx0fVxyXG5cclxuXHRpZiAoZmlyZUJ1dHRvbi5pc0Rvd24pIHtcclxuXHRcdHBsYXllckZpcmVzKCk7XHJcblx0fVxyXG5cclxuXHRnYW1lLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAobGFzZXJzLCBlbmVtaWVzLCBzaGlwQ29sbGlkZSwgbnVsbCwgdGhpcyk7XHJcblx0Z2FtZS5waHlzaWNzLmFyY2FkZS5vdmVybGFwKHBsYXllciwgZW5lbWllcywgcGxheWVyQ29sbGlkZSwgbnVsbCwgdGhpcyk7XHJcblx0c3RhcmZpZWxkLnRpbGVQb3NpdGlvbi55ICs9IDM7XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzaGlwQ29sbGlkZShwbGF5ZXIsIGVuZW15KSB7XHJcblx0dmFyIGV4cGxvc2lvbiA9IGV4cGxvc2lvbnMuZ2V0Rmlyc3RFeGlzdHMoZmFsc2UpO1xyXG5cdGV4cGxvc2lvbi5yZXNldChlbmVteS5ib2R5LnggKyBlbmVteS5ib2R5LmhhbGZXaWR0aCwgZW5lbXkuYm9keS55ICsgZW5lbXkuYm9keS5oYWxmSGVpZ2h0KTtcclxuXHRleHBsb3Npb24uYm9keS52ZWxvY2l0eS55ID0gZW5lbXkuYm9keS52ZWxvY2l0eS55O1xyXG5cdGV4cGxvc2lvbi5hbHBoYSA9IDAuNztcclxuXHRleHBsb3Npb24ucGxheSgnZXhwbG9zaW9uJywgMzAsIGZhbHNlLCB0cnVlKTtcclxuXHRlbmVteS5raWxsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYXllckNvbGxpZGUocGxheWVyLCBlbmVteSkge1xyXG5cdHZhciBleHBsb3Npb24gPSBleHBsb3Npb25zLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuXHRleHBsb3Npb24ucmVzZXQocGxheWVyLmJvZHkueCArIHBsYXllci5ib2R5LmhhbGZXaWR0aCwgcGxheWVyLmJvZHkueSArIHBsYXllci5ib2R5LmhhbGZIZWlnaHQpO1xyXG5cdGV4cGxvc2lvbi5ib2R5LnZlbG9jaXR5LnkgPSBwbGF5ZXIuYm9keS52ZWxvY2l0eS55O1xyXG5cdGV4cGxvc2lvbi5hbHBoYSA9IDAuNztcclxuXHRleHBsb3Npb24ucGxheSgnZXhwbG9zaW9uJywgMzAsIGZhbHNlLCB0cnVlKTtcclxuXHRwbGF5ZXIua2lsbCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGF5ZXJGaXJlcygpIHtcclxuXHQvLyBHZXQgdGhlIGZpcnN0IGxhc2VyIHRoYXQncyBpbmFjdGl2ZSwgYnkgcGFzc2luZyAnZmFsc2UnIGFzIGEgcGFyYW1ldGVyXHJcblx0dmFyIGxhc2VyID0gbGFzZXJzLmdldEZpcnN0RXhpc3RzKGZhbHNlKTtcclxuXHRpZiAobGFzZXIpIHtcclxuXHRcdC8vIElmIHdlIGhhdmUgYSBsYXNlciwgc2V0IGl0IHRvIHRoZSBzdGFydGluZyBwb3NpdGlvblxyXG5cdFx0bGFzZXIucmVzZXQocGxheWVyLnggKyA1MCwgcGxheWVyLnkgLSAyMCk7XHJcblx0XHQvLyBHaXZlIGl0IGEgdmVsb2NpdHkgb2YgLTUwMCBzbyBpdCBzdGFydHMgc2hvb3RpbmdcclxuXHRcdGxhc2VyLmJvZHkudmVsb2NpdHkueSA9IC01MDA7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldExhc2VyKGxhc2VyKSB7XHJcblx0Ly8gRGVzdHJveSB0aGUgbGFzZXJcclxuXHRsYXNlci5raWxsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhdW5jaEdyZWVuRW5lbXkoKSB7XHJcblx0bGV0IGRpZmZpY3VsdHlNdWx0aSA9IGRpZmZpY3VsdHkgKiAxMDtcclxuXHR2YXIgTUlOX0VORU1ZX1NQQUNJTkcgPSBkaWZmaWN1bHR5TXVsdGk7XHJcblx0dmFyIE1BWF9FTkVNWV9TUEFDSU5HID0gZGlmZmljdWx0eU11bHRpICogMTA7XHJcblx0dmFyIEVORU1ZX1NQRUVEID0gZW5lbXlTcGVlZDtcclxuXHJcblx0dmFyIGVuZW15ID0gZW5lbWllcy5nZXRGaXJzdEV4aXN0cyhmYWxzZSk7XHJcblx0aWYgKGVuZW15KSB7XHJcblx0XHRlbmVteS5yZXNldChnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZSgwLCBnYW1lLndpZHRoKSwgLTIwKTtcclxuXHRcdGVuZW15LmJvZHkudmVsb2NpdHkueCA9IGdhbWUucm5kLmludGVnZXJJblJhbmdlKC0zMDAsIDMwMCk7XHJcblx0XHRlbmVteS5ib2R5LnZlbG9jaXR5LnkgPSBFTkVNWV9TUEVFRDtcclxuXHRcdGVuZW15LmJvZHkuZHJhZy54ID0gMTAwO1xyXG5cdFx0ZW5lbXkudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGVuZW15LmFuZ2xlID0gMTgwIC0gZ2FtZS5tYXRoLnJhZFRvRGVnKE1hdGguYXRhbjIoZW5lbXkuYm9keS52ZWxvY2l0eS54LCBlbmVteS5ib2R5LnZlbG9jaXR5LnkpKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHQvLyAgU2VuZCBhbm90aGVyIGVuZW15IHNvb25cclxuXHRnYW1lLnRpbWUuZXZlbnRzLmFkZChnYW1lLnJuZC5pbnRlZ2VySW5SYW5nZShNSU5fRU5FTVlfU1BBQ0lORywgTUFYX0VORU1ZX1NQQUNJTkcpLCBsYXVuY2hHcmVlbkVuZW15KTtcclxuXHRcclxufVxyXG4iXX0=
